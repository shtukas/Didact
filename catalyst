#!/usr/bin/ruby

# encoding: UTF-8

require_relative "Libs/loader.rb"

# ----------------------------------------------------------------------------

$Nx77RunTimeCacheKeyPrefix = SecureRandom.hex

Thread.new {
    loop {
        sleep 300
        system("#{File.dirname(__FILE__)}/vienna-import")
    }
}

mode = LucilleCore::selectEntityFromListOfEntitiesOrNull("mode", ["screen", "stream"])
exit if mode.nil?
displayMode = mode.upcase
$CatalystDisplayMode = displayMode
TerminalDisplayOperator::displayLoop(displayMode)
